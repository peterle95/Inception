To ensure that your NGINX server **only uses SSL/TLS** (and never falls back to unencrypted HTTP), 
and that it enforces **TLSv1.2 or TLSv1.3**, follow these steps:

---

## 1. **Check NGINX Configuration**
Your `nginx.conf` should:
- **Only listen on port 443** (no port 80).
- **Enforce TLSv1.2 or TLSv1.3**.
- **Redirect HTTP to HTTPS** (optional, but recommended for security).

---

## 2. **Verify NGINX Configuration**
After updating your config, reload NGINX:
```bash
docker exec -it nginx nginx -t
docker exec -it nginx nginx -s reload
```
- `nginx -t` checks for syntax errors.
- `nginx -s reload` applies the new config.

---

## 3. **Test SSL/TLS Enforcement**
### a. **Check if Port 80 is Closed**
```bash
curl -v http://pmolzer.42.fr
```
**Expected:**
- Connection refused or timeout (since only port 443 is open).

### b. **Check TLS Version**
```bash
openssl s_client -connect pmolzer.42.fr:443 -tls1_3
```
**Expected:**
- Both command should succeed and show the certificate.

```bash
openssl s_client -connect pmolzer.42.fr:443 -tls1
openssl s_client -connect pmolzer.42.fr:443 -tls1_1
```
**Expected:**
- Both commands should fail with a handshake error.

### c. **Check Certificate Validity**
```bash
openssl s_client -connect pmolzer.42.fr:443 -servername pmolzer.42.fr -showcerts </dev/null 2>/dev/null | openssl x509 -noout -dates
```
**Expected:**
- Valid `notBefore` and `notAfter` dates.

---

## 4. **Check Browser Security**
- Open `https://pmolzer.42.fr` in a browser.
- Click the padlock icon in the address bar.
- Verify:
  - The connection is secure.
  - The certificate is valid.
  - The protocol is TLS 1.2 or 1.3.

---

## 5. **Optional: Redirect HTTP to HTTPS**
If you want to redirect HTTP to HTTPS (recommended for security), add this to your NGINX config:
```nginx
server {
    listen 80;
    listen [::]:80;
    server_name pmolzer.42.fr;
    return 301 https://$host$request_uri;
}
```
Then reload NGINX.

---

## **Summary Table**

| Check                                      | Expected Result                          |
|--------------------------------------------|------------------------------------------|
| `curl -v http://pmolzer.42.fr`             | Connection refused                       |
| `openssl s_client -connect ... -tls1_2`    | Success, shows certificate               |
| `openssl s_client -connect ... -tls1`      | Handshake failure                        |
| Browser padlock                            | Secure, TLS 1.2/1.3                      |
| `nginx -t`                                 | "syntax is ok"                           |

---

**If all checks pass, your NGINX server is correctly enforcing SSL/TLS!**